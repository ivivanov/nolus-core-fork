name: builder-create
description: "Builds builder image and push to aws container registry"

inputs:
  aws-access-key-id:
    description: ""
    required: true
  aws-secret-access-key:
    description: ""
    required: true
  aws-region:
    description: ""
    required: true
  aws-ecr-registry:
    description: ""
    required: true
  aws-ecr-registry-alias:
    description: ""
    required: true
  aws-ecr-repository:
    description: ""
    required: true
  dockerfile:
    description: ""
    required: true
  image-tag:
    description: "Docker image tag"
    required: true

outputs:
  aws_output:
    description: "Error code - non zero means the image does not exist"

runs:
  using: "docker"
  image: "Dockerfile"
  args:
    - ${{ inputs.aws-access-key-id }}
    - ${{ inputs.aws-secret-access-key }}
    - ${{ inputs.aws-region }}
    - ${{ inputs.aws-ecr-registry }}
    - ${{ inputs.aws-ecr-registry-alias }}
    - ${{ inputs.aws-ecr-repository }}
    - ${{ inputs.dockerfile }}
    - ${{ inputs.image-tag }}
